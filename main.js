(()=>{"use strict";var t={208:(t,e,n)=>{n.d(e,{A:()=>a});var r=n(601),i=n.n(r),s=n(314),o=n.n(s)()(i());o.push([t.id,':root {\n  --ocean-blue: #1a4876;\n  --deep-blue: #0a2742;\n  --light-blue: #76a5c4;\n  --sand: #e8d4a9;\n  --wood: #8a5a3b;\n  --ship-gray: #5c5c5c;\n  --hit-red: #cf3232;\n  --miss-white: #e0e0e0;\n  --grid-size: 35px;\n}\n\nbody {\n  background-color: var(--deep-blue);\n  background-image: linear-gradient(\n    to bottom,\n    var(--deep-blue),\n    var(--ocean-blue)\n  );\n  color: white;\n  font-family: "Trebuchet MS", sans-serif;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  margin: 0;\n  padding: 20px;\n}\n\nh1 {\n  text-align: center;\n  text-transform: uppercase;\n  letter-spacing: 3px;\n  margin-bottom: 40px;\n  color: var(--sand);\n  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);\n}\n\n.gameContainer {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 40px;\n  max-width: 1200px;\n}\n\n.gridContainer {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: var(--ocean-blue);\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);\n  border: 2px solid var(--light-blue);\n}\n\n.disabled {\n    pointer-events: none;\n    opacity: 0.7;\n}\n\nh3 {\n  font-size: 1.5rem;\n  margin-top: 0;\n  margin-bottom: 15px;\n  color: var(--sand);\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n\n.grid {\n  display: grid;\n  grid-template-columns: repeat(var(--columns), 1fr);\n  grid-template-rows: repeat(var(--rows), 1fr);\n  border: 3px solid var(--wood);\n  border-radius: 4px;\n  overflow: hidden;\n  background-color: var(--ocean-blue);\n}\n\n.gameCell {\n  background-color: var(--light-blue);\n  border: 1px solid var(--deep-blue);\n  box-sizing: border-box;\n  width: var(--grid-size);\n  height: var(--grid-size);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n#targetGrid.game-active > .gameCell:hover:not(.coordinateCell):not(.hit):not(.miss) {\n  background-color: rgba(255, 255, 255, 0.2);\n  transform: scale(1.05);\n}\n\n.gameCell.hit {\n  background-color: var(--hit-red);\n  background-image: radial-gradient(circle, var(--hit-red), #8a0000);\n  position: relative;\n}\n\n.gameCell.hit::before {\n  content: "✘";\n  font-size: 1.5rem;\n  color: white;\n}\n\n.gameCell.miss {\n  background-color: var(--miss-white);\n  background-image: radial-gradient(circle, white, var(--miss-white));\n  position: relative;\n}\n\n.gameCell.miss::before {\n  content: "•";\n  font-size: 1.5rem;\n  color: var(--deep-blue);\n}\n\n.shipCell {\n  background-color: var(--ship-gray);\n  background-image: linear-gradient(45deg, var(--ship-gray), #7a7a7a);\n  border: 1px solid #333;\n}\n\n.coordinateCell {\n  background-color: var(--wood);\n  color: var(--sand);\n  font-weight: bold;\n  text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);\n}\n\n.hovered {\n  background-color: rgba(255, 255, 255, 0.3);\n  box-shadow: inset 0 0 5px rgba(255, 255, 255, 0.5);\n}\n\n.rowHeader {\n  background-color: var(--wood);\n  color: var(--sand);\n}\n\n.columnHeader {\n  background-color: var(--wood);\n  color: var(--sand);\n}\n\n.coordinateCell:first-child {\n  background-color: var(--wood);\n  border: 1px solid var(--deep-blue);\n  color: var(--deep-blue);\n}\n\n/* Responsive design */\n@media (max-width: 768px) {\n  .gameContainer {\n    flex-direction: column;\n  }\n\n  :root {\n    --grid-size: 30px;\n  }\n}\n\n/* Game status and controls */\n.gameStatus {\n  background-color: var(--deep-blue);\n  padding: 10px 20px;\n  border-radius: 5px;\n  margin: 20px 0;\n  text-align: center;\n  border: 1px solid var(--light-blue);\n}\n\n.buttonContainer {\n    text-align: center;\n}\n\nbutton {\n  background-color: var(--sand);\n  color: var(--deep-blue);\n  border: none;\n  padding: 10px 20px;\n  border-radius: 5px;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.2s;\n  margin-top: 15px;\n  text-transform: uppercase;\n  letter-spacing: 1px;\n}\n\nbutton:hover {\n  background-color: #f5e7c7;\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n}\n\n/* Animation for hits */\n@keyframes explosion {\n  0% {\n    transform: scale(0.8);\n    opacity: 0.8;\n  }\n  50% {\n    transform: scale(1.2);\n    opacity: 1;\n  }\n  100% {\n    transform: scale(1);\n    opacity: 1;\n  }\n}\n\n.gameCell.hit {\n  animation: explosion 0.5s ease-out;\n}\n\n.shipDock {\n  background-color: var(--ocean-blue);\n  border-radius: 8px;\n  padding: 20px;\n  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);\n  border: 2px solid var(--light-blue);\n  margin: 30px auto;\n  max-width: 800px;\n  text-align: center;\n}\n\n.dockInstructions {\n  margin-bottom: 15px;\n  font-style: italic;\n  color: var(--sand);\n}\n\n.dockContainer {\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: center;\n  gap: 20px;\n  padding: 10px;\n}\n\n.dockShip {\n  display: flex;\n  cursor: move;\n  margin: 5px;\n  transition: transform 0.2s;\n}\n\n.dockShip:hover {\n  transform: translateY(-5px);\n}\n\n.dockShipCell {\n  width: var(--grid-size);\n  height: var(--grid-size);\n  background-color: var(--ship-gray);\n  background-image: linear-gradient(45deg, var(--ship-gray), #7a7a7a);\n  border: 1px solid #333;\n}\n\n.dockShip.vertical {\n  display: flex;\n  flex-direction: column;\n}\n\n.dockShip.placed {\n  opacity: 0.4;\n  cursor: not-allowed;\n}\n\n.shipPreview {\n  background-color: rgba(92, 92, 92, 0.5) !important;\n}\n\n.invalidPlacement {\n  background-color: rgba(207, 50, 50, 0.5) !important;\n}\n\nbutton:disabled {\n  background-color: #ccc;\n  color: #666;\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: none;\n}\n\n.buttonContainer {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n}\n\n.ship-container {\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.rotate-btn {\n  margin-left: 10px;\n  background-color: #4CAF50;\n  border: none;\n  color: white;\n  width: 30px;\n  height: 30px;\n  text-align: center;\n  text-decoration: none;\n  display: inline-block;\n  font-size: 16px;\n  border-radius: 50%;\n  cursor: pointer;\n}\n\n.rotate-btn:hover {\n  background-color: #45a049;\n}\n\n.rotate-btn:disabled {\n  background-color: #cccccc;\n  cursor: not-allowed;\n}\n\n.victory {\n  color: green;\n  font-weight: bold;\n  font-size: 1.5em;\n}\n\n.defeat {\n  color: red;\n  font-weight: bold;\n  font-size: 1.5em;\n}\n\n#playAgain {\n  display: block;\n  margin: 20px auto;\n  padding: 10px 20px;\n  font-size: 1.2em;\n  background-color: #4CAF50;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n#playAgain:hover {\n  background-color: #45a049;\n}',""]);const a=o},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var d=this[a][0];null!=d&&(o[d]=!0)}for(var l=0;l<t.length;l++){var c=[].concat(t[l]);r&&o[c[0]]||(void 0!==s&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=s),n&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=n):c[2]=n),i&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=i):c[4]="".concat(i)),e.push(c))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var s={},o=[],a=0;a<t.length;a++){var d=t[a],l=r.base?d[0]+r.base:d[0],c=s[l]||0,h="".concat(l," ").concat(c);s[l]=c+1;var p=n(h),u={css:d[1],media:d[2],sourceMap:d[3],supports:d[4],layer:d[5]};if(-1!==p)e[p].references++,e[p].updater(u);else{var g=i(u,r);r.byIndex=a,e.splice(a,0,{identifier:h,updater:g,references:1})}o.push(h)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=r(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=n(s[o]);e[a].references--}for(var d=r(t,i),l=0;l<s.length;l++){var c=n(s[l]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}s=d}}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={id:r,exports:{}};return t[r](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r=n(72),i=n.n(r),s=n(825),o=n.n(s),a=n(659),d=n.n(a),l=n(56),c=n.n(l),h=n(540),p=n.n(h),u=n(113),g=n.n(u),m=n(208),v={};v.styleTagTransform=g(),v.setAttributes=c(),v.insert=d().bind(null,"head"),v.domAPI=o(),v.insertStyleElement=p(),i()(m.A,v),m.A&&m.A.locals&&m.A.locals;class f{constructor(t,e=f.Types.OCEAN){this.coordinates=t,this.setType(e)}setType(t){this.type=t}static Types=Object.freeze({OCEAN:"Ocean",SHIP:"Ship",MISS:"Miss"})}class y{constructor(t=2,e=y.Orientations.HORIZONTAL){this.hits=0,this.length=t,this.orientation=e}hit(){this.hits++}setLocations(t){this.locations=t}isSunk(){return this.hits>=this.length}static Orientations=Object.freeze({HORIZONTAL:"Horizontal",VERTICAL:"Vertical"})}class b{static randomNum(t){return Math.floor(Math.random()*t)}}class x{constructor(t=9,e=9,n=5){this.columns=t,this.rows=e,this.shipCount=n,this.gameboard=[],this.pastShots=new Set,this.createboard()}createboard(){for(let t=0;t<this.columns;t++){this.gameboard[t]=[];for(let e=0;e<this.rows;e++)this.gameboard[t].push(new f([t,e]))}}placeShips(t){for(const e of t){const t=this.getRandomLegalPosition(e),n=this.getShipCells(t,e);e.setLocations(n);for(const t of n)t.setType(f.Types.SHIP)}}getRandomLegalPosition(t){let e,n,r=!1;do{if(e=b.randomNum(this.rows),n=b.randomNum(this.columns),this.shipIsOutOfBounds(e,n,t))continue;const i=this.getShipCells([e,n],t);if(!i.some((t=>void 0===t))&&i.every((t=>t.type===f.Types.OCEAN))){r=!0;break}}while(!r);return[e,n]}shipIsOutOfBounds(t,e,n){return n.orientation===y.Orientations.HORIZONTAL&&e+n.length>this.columns||n.orientation===y.Orientations.VERTICAL&&t+n.length>this.rows}receiveAttack(t,e){this.pastShots.add(t);const[n,r]=t;for(const t of e)for(const e of t.locations)if(e.coordinates[0]==n&&e.coordinates[1]==r)return t.hit(),!0;const i=this.gameboard[n][r];return i.type===f.Types.OCEAN&&i.setType(f.Types.MISS),!1}getShipCells(t,e){const n=[],[r,i]=t;for(let t=0;t<e.length;t++)e.orientation===y.Orientations.HORIZONTAL?n.push(this.gameboard[r][i+t]):e.orientation===y.Orientations.VERTICAL&&n.push(this.gameboard[r+t][i]);return n}containsTarget(t,e){if(!Array.isArray(e)||2!==e.length)return!1;const[n,r]=e;return t.some((t=>Array.isArray(t)&&2===t.length&&t[0]===n&&t[1]===r))}getShipFromLocation(t){const[e,n]=t;for(const t of this.players)for(const r of t.ships){const[t,i]=r.location;if(t===e&&i===n)return r}}}class C{constructor(t=C.Types.HUMAN,e=5){if(this.type=t,this.shipCount=e,this.ships=[],this.shipBoard=new x,this.targetBoard=new x,t===C.Types.CPU){const t=new y(4,this.randomOrientation());this.ships.push(t);const e=new y(4,this.randomOrientation());this.ships.push(e);const n=new y(3,this.randomOrientation());this.ships.push(n);const r=new y(3,this.randomOrientation());this.ships.push(r);const i=new y(2,this.randomOrientation());this.ships.push(i),this.shipBoard.placeShips(this.ships)}}static Types=Object.freeze({HUMAN:"Human",CPU:"CPU"});randomOrientation(){return Math.random()<.5?y.Orientations.HORIZONTAL:y.Orientations.VERTICAL}sendAttack(t,e){return!!this.targetBoard.receiveAttack(t,e.ships)}chooseTarget(t){let e,n,r;do{n=b.randomNum(t.shipBoard.rows),r=b.randomNum(t.shipBoard.columns),e=!0;for(const t of this.targetBoard.pastShots){const[i,s]=t;if(n===i&&r===s){e=!1;break}}}while(!e);return[n,r]}allShipsSunk(){return this.ships.every((t=>t.isSunk()))}}class S{constructor(){this.players=[new C,new C(C.Types.CPU)],this.currentPlayer=this.players[0],this.gameContainerDiv=document.querySelector(".gameContainer"),this.shipGridDiv=document.querySelector("#shipGrid"),this.targetGridDiv=document.querySelector("#targetGrid"),this.gameStatusDiv=document.querySelector(".gameStatus"),this.dockContainerDiv=document.querySelector(".dockContainer"),this.startButton=document.querySelector("#startGame"),this.randomizeButton=document.querySelector("#randomizeShips"),this.boundTargetGridOnClick=this.targetGridOnClick.bind(this),this.shipBeingDragged=null,this.shipOrientation=y.Orientations.HORIZONTAL,this.playerShipsPlaced=0,this.setGridRowsAndColumns(this.currentPlayer),this.createGridWithCoordinates(this.shipGridDiv),this.createGridWithCoordinates(this.targetGridDiv),this.initializeShipDock(),this.addShipPlacementEvents(),this.randomizeButton.addEventListener("click",(()=>{this.randomizeShips()})),document.getElementById("startGame").addEventListener("click",(()=>{this.addTargetGridEventListeners(this.targetGridDiv),this.targetGridDiv.classList.add("game-active"),this.gameStatusDiv.textContent=S.statusMessages.YOURTURN,document.getElementById("shipDock").style.display="none",this.randomizeButton.style.display="none",this.startButton.style.display="none"}))}setGridRowsAndColumns(t){const e=document.querySelectorAll(".gridContainer");for(const n of e){const e=t.shipBoard.rows,r=t.shipBoard.columns;n.style.setProperty("--rows",e+1),n.style.setProperty("--columns",r+1)}}createGridWithCoordinates(t){for(let e=0;e<=this.players[0].shipBoard.columns;e++){const n=document.createElement("div");n.classList.add("gameCell","coordinateCell"),e>0&&(n.textContent=e,n.classList.add("columnHeader")),t.appendChild(n)}for(let e=0;e<this.players[0].shipBoard.rows;e++){const n=document.createElement("div");n.classList.add("gameCell","coordinateCell","rowHeader"),n.textContent=String.fromCharCode(65+e),t.appendChild(n);for(let n=0;n<this.players[0].shipBoard.columns;n++){const r=document.createElement("div");r.classList.add("gameCell"),r.dataset.row=e,r.dataset.col=n,t.appendChild(r)}}}drawShips(t){for(const t of this.shipGridDiv.children)t.classList.remove("shipCell");for(const e of t.ships)for(const t of e.locations)for(const e of this.shipGridDiv.children)e.dataset.row==t.coordinates[0]&&e.dataset.col==t.coordinates[1]&&e.classList.add("shipCell")}initializeShipDock(){this.currentPlayer.ships=[],[4,4,3,3,2].forEach(((t,e)=>{const n=new y(t,y.Orientations.HORIZONTAL);this.currentPlayer.ships.push(n);const r=document.createElement("div");r.classList.add("ship-container");const i=document.createElement("div");i.classList.add("dockShip"),i.dataset.shipIndex=e;for(let e=0;e<t;e++){const t=document.createElement("div");t.classList.add("dockShipCell"),i.appendChild(t)}const s=document.createElement("button");s.textContent="↻",s.classList.add("rotate-btn"),s.addEventListener("click",(()=>{n.orientation=n.orientation===y.Orientations.HORIZONTAL?y.Orientations.VERTICAL:y.Orientations.HORIZONTAL,i.classList.toggle("vertical")})),i.draggable=!0,i.addEventListener("dragstart",(t=>this.onDragStart(t,e))),r.appendChild(i),r.appendChild(s),this.dockContainerDiv.appendChild(r)})),this.clearShipGrid()}clearShipGrid(){const t=this.shipGridDiv.querySelectorAll(".gameCell:not(.coordinateCell)");for(const e of t)e.classList.remove("shipCell")}addShipPlacementEvents(){this.shipGridDiv.querySelectorAll(".gameCell:not(.coordinateCell)").forEach((t=>{t.addEventListener("dragover",(e=>this.onDragOver(e,t))),t.addEventListener("dragleave",(e=>this.onDragLeave(e,t))),t.addEventListener("drop",(e=>this.onDrop(e,t)))})),document.querySelectorAll(".dockShip").forEach((t=>{t.addEventListener("dragend",(()=>{this.shipBeingDragged=null}))}))}onDragStart(t,e){if(t.target.classList.contains("placed"))return void t.preventDefault();this.shipBeingDragged=e;const n=this.currentPlayer.ships[e];this.shipOrientation=n.orientation,t.dataTransfer.setData("text/plain",e);const r=t.target.getBoundingClientRect(),i=t.clientX-r.left,s=t.clientY-r.top;t.dataTransfer.setDragImage(t.target,i,s)}onDragOver(t,e){t.preventDefault(),document.querySelectorAll(".gameCell.hovered").forEach((t=>t.classList.remove("hovered"))),e.classList.add("hovered"),this.clearShipPreview();const n=this.shipBeingDragged,r=this.currentPlayer.ships[n],i=parseInt(e.dataset.row),s=parseInt(e.dataset.col),o=this.validateShipPlacement(i,s,r.length,this.shipOrientation);this.showShipPreview(i,s,r.length,this.shipOrientation,o)}onDragLeave(t,e){this.clearShipPreview(),e.classList.remove("hovered")}onDrop(t,e){t.preventDefault();const n=this.shipBeingDragged,r=this.currentPlayer.ships[n],i=parseInt(e.dataset.row),s=parseInt(e.dataset.col);if(this.validateShipPlacement(i,s,r.length,this.shipOrientation)){this.placeShip(r,i,s,this.shipOrientation);const t=document.querySelector(`.dockShip[data-ship-index="${n}"]`);t.classList.add("placed");const e=t.parentElement.querySelector(".rotate-btn");e&&(e.disabled=!0),this.playerShipsPlaced++,this.playerShipsPlaced===this.currentPlayer.ships.length&&(this.startButton.disabled=!1)}this.clearShipPreview(),e.classList.remove("hovered")}validateShipPlacement(t,e,n,r){if(r===y.Orientations.HORIZONTAL){if(e+n>this.currentPlayer.shipBoard.columns)return!1}else if(r===y.Orientations.VERTICAL&&t+n>this.currentPlayer.shipBoard.rows)return!1;for(let i=0;i<n;i++){let n=t,s=e;r===y.Orientations.HORIZONTAL?s+=i:n+=i;const o=this.getCellDivFromCoordinates([n,s]);if(o&&o.classList.contains("shipCell"))return!1}return!0}showShipPreview(t,e,n,r,i){for(let s=0;s<n;s++){let n=t,o=e;if(r===y.Orientations.HORIZONTAL?o+=s:n+=s,n>=this.currentPlayer.shipBoard.rows||o>=this.currentPlayer.shipBoard.columns)continue;const a=this.getCellDivFromCoordinates([n,o]);a&&a.classList.add(i?"shipPreview":"invalidPlacement")}}clearShipPreview(){const t=this.shipGridDiv.querySelectorAll(".gameCell");for(const e of t)e.classList.remove("shipPreview","invalidPlacement","hovered")}placeShip(t,e,n,r){t.orientation=r,t.locations=[];for(let i=0;i<t.length;i++){let t=e,s=n;r===y.Orientations.HORIZONTAL?s+=i:t+=i;const o=this.getCellDivFromCoordinates([t,s]);o&&o.classList.add("shipCell")}const i=this.currentPlayer.shipBoard.getShipCells([e,n],t);t.setLocations(i)}randomizeShips(){this.clearShipGrid();const t=new C(C.Types.CPU);this.currentPlayer.ships=[];for(const e of t.ships)this.currentPlayer.ships.push(e);this.currentPlayer.shipBoard=t.shipBoard,this.playerShipsPlaced=this.currentPlayer.ships.length,this.drawShips(this.currentPlayer);const e=document.querySelectorAll(".dockShip"),n=document.querySelectorAll(".rotate-btn");for(const t of e)t.classList.add("placed");for(const t of n)t.disabled=!0;this.startButton.disabled=!1}addTargetGridEventListeners(t){const e=[...t.children].filter((t=>void 0!==t.dataset.row));for(const t of e)t.addEventListener("mouseenter",this.targetGridOnMouseEnter.bind(this)),t.addEventListener("mouseleave",this.targetGridOnMouseLeave.bind(this)),t.addEventListener("click",this.boundTargetGridOnClick)}targetGridOnMouseEnter(t){t.target.classList.add("hovered")}targetGridOnMouseLeave(t){t.target.classList.remove("hovered")}targetGridOnClick(t){const e=t.target,n=[e.dataset.row,e.dataset.col],r=this.players[1];this.players[0].targetBoard.receiveAttack(n,r.ships)?e.classList.add("hit"):e.classList.add("miss"),e.removeEventListener("click",this.boundTargetGridOnClick),r.allShipsSunk()?this.endGame(!0):this.players[1].type===C.Types.CPU&&this.enemyTurn()}endGame(t){this.disablePlayerActions();const e=[...this.targetGridDiv.children].filter((t=>void 0!==t.dataset.row));for(const t of e)t.removeEventListener("mouseenter",this.targetGridOnMouseEnter.bind(this)),t.removeEventListener("mouseleave",this.targetGridOnMouseLeave.bind(this)),t.removeEventListener("click",this.boundTargetGridOnClick);t&&(t?(this.gameStatusDiv.textContent=S.statusMessages.VICTORY,this.gameStatusDiv.classList.add("victory")):(this.gameStatusDiv.textContent=S.statusMessages.DEFEAT,this.gameStatusDiv.classList.add("defeat")));const n=document.createElement("button");n.textContent="Play Again",n.id="playAgain",n.addEventListener("click",(()=>this.resetGame())),this.gameContainerDiv.appendChild(n)}resetGame(){const t=document.getElementById("playAgain");t&&t.remove(),this.gameStatusDiv.classList.remove("victory","defeat"),this.targetGridDiv.classList.remove("game-active","disabled"),this.players=[new C,new C(C.Types.CPU)],this.currentPlayer=this.players[0],this.shipGridDiv.innerHTML="",this.targetGridDiv.innerHTML="",this.createGridWithCoordinates(this.shipGridDiv),this.createGridWithCoordinates(this.targetGridDiv),this.shipBeingDragged=null,this.shipOrientation=y.Orientations.HORIZONTAL,this.playerShipsPlaced=0,this.dockContainerDiv.innerHTML="",this.initializeShipDock(),this.addShipPlacementEvents(),document.getElementById("shipDock").style.display="block",this.randomizeButton.style.display="inline-block",this.startButton.style.display="inline-block",this.startButton.disabled=!0,this.gameStatusDiv.textContent="Place your ships"}enemyTurn(){this.disablePlayerActions(),this.gameStatusDiv.textContent=S.statusMessages.CPUTURN;const t=1e3*(Math.random()+.5);setTimeout((()=>{this.executeAttack(),this.gameStatusDiv.textContent=S.statusMessages.YOURTURN,this.enablePlayerActions()}),t)}disablePlayerActions(){this.targetGridDiv.classList.add("disabled")}enablePlayerActions(){this.targetGridDiv.classList.remove("disabled")}executeAttack(){const t=this.players[1],e=this.players[0],n=t.chooseTarget(e),r=t.sendAttack(n,e),i=this.getCellDivFromCoordinates(n);r?i.classList.add("hit"):i.classList.add("miss"),e.allShipsSunk()&&this.endGame(!1)}getCellDivFromCoordinates(t){const[e,n]=t;for(const t of this.shipGridDiv.children)if(t.dataset.row==e&&t.dataset.col==n)return t}static statusMessages=Object.freeze({YOURTURN:"Your turn - fire at enemy waters!",CPUTURN:"Enemy's turn - choosing a target.",VICTORY:"Victory! You've sunk all enemy ships!",DEFEAT:"Defeat! All your ships have been sunk!"})}new S})();